<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ConfiguraÃ§Ã£o de SincronizaÃ§Ã£o - RFCP Tracker</title>
  <link rel="stylesheet" href="src/assets/sync-styles.css" />
</head>
<body>
  <div class="container">
    <h1>âš™ï¸ ConfiguraÃ§Ã£o de SincronizaÃ§Ã£o</h1>
    <p class="subtitle">Sincronize seu progresso entre dispositivos usando GitHub Gists</p>

    <div id="status-badge"></div>
    <div id="alert-container"></div>

    <div id="loading" class="loading">
      <div class="spinner"></div>
      <p style="margin-top: 10px; color: #666;">Sincronizando...</p>
    </div>

    <!-- InstruÃ§Ãµes -->
    <div class="instructions" id="instructions">
      <h3>ğŸ“‹ Como configurar:</h3>
      <ol>
        <li>Acesse <a href="https://github.com/settings/tokens/new" target="_blank">GitHub Token Settings</a></li>
        <li>Clique em "Generate new token (classic)"</li>
        <li>DÃª um nome (ex: "RFCP Tracker")</li>
        <li>Selecione apenas o escopo <strong>"gist"</strong></li>
        <li>Clique em "Generate token" e copie o token</li>
        <li>Cole o token abaixo e clique em "Ativar SincronizaÃ§Ã£o"</li>
      </ol>
    </div>

    <!-- FormulÃ¡rio -->
    <form id="sync-form">
      <div class="form-group">
        <label for="github-token">Token do GitHub</label>
        <input 
          type="password" 
          id="github-token" 
          placeholder="ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
          autocomplete="off"
        >
        <div class="help-text">
          Token com permissÃ£o de "gist". 
          <a href="https://github.com/settings/tokens/new" target="_blank">Criar token</a>
        </div>
      </div>

      <div class="button-group" id="main-buttons">
        <button type="submit" class="btn-primary" id="enable-btn">
          Ativar SincronizaÃ§Ã£o
        </button>
        <button type="button" class="btn-secondary" id="test-btn">
          Testar ConexÃ£o
        </button>
        <button type="button" class="btn-primary" onclick="runAllTests()"> 
          Executar Todos os Testes
        </button>
      </div>
    </form>

    <!-- InformaÃ§Ãµes de sincronizaÃ§Ã£o (mostrado quando ativo) -->
    <div class="sync-info" id="sync-info" style="display: none;">
      <h3>â„¹ï¸ Status da SincronizaÃ§Ã£o</h3>
      <div class="sync-info-item">
        <span class="sync-info-label">Ãšltima sincronizaÃ§Ã£o:</span>
        <span class="sync-info-value" id="last-sync">Nunca</span>
      </div>
      <div class="sync-info-item">
        <span class="sync-info-label">Gist ID:</span>
        <span class="sync-info-value" id="gist-id">-</span>
      </div>
    </div>

    <!-- OpÃ§Ãµes avanÃ§adas (mostrado quando ativo) -->
    <div class="advanced-options" id="advanced-options" style="display: none;">
      <h3>ğŸ”§ OpÃ§Ãµes AvanÃ§adas</h3>
      <div class="button-group">
        <button type="button" class="btn-secondary" id="force-upload-btn">
          â¬†ï¸ ForÃ§ar Upload
        </button>
        <button type="button" class="btn-secondary" id="force-download-btn">
          â¬‡ï¸ ForÃ§ar Download
        </button>
      </div>
      <div class="button-group" style="margin-top: 10px;">
        <button type="button" class="btn-danger" id="disable-btn">
          Desativar SincronizaÃ§Ã£o
        </button>
      </div>
    </div>

    <!-- === Test Runner UI (embutido) === -->
    <section id="tests-section-panel" class="panel" style="margin-top: 28px;">
      <div class="panel-header">
        <h2>ğŸ§ª Suite de Testes - SincronizaÃ§Ã£o</h2>
        <p class="subtitle small">ValidaÃ§Ã£o completa do sistema de sincronizaÃ§Ã£o</p>
      </div>

      <!-- Resumo -->
      <div class="summary" id="summary">
        <h3>ğŸ“Š Resumo dos Testes</h3>
        <div class="summary-stats">
          <div class="stat">
            <div class="stat-value" id="total-tests">0</div>
            <div class="stat-label">Total</div>
          </div>
          <div class="stat">
            <div class="stat-value success" id="passed-tests">0</div>
            <div class="stat-label">Passou</div>
          </div>
          <div class="stat">
            <div class="stat-value danger" id="failed-tests">0</div>
            <div class="stat-label">Falhou</div>
          </div>
          <div class="stat">
            <div class="stat-value muted" id="pending-tests">0</div>
            <div class="stat-label">Pendente</div>
          </div>
        </div>
      </div>

      <!-- Controles -->
      <div class="controls" style="margin-top:12px;">
        <div class="button-group">
          <button type="button" class="btn-secondary" onclick="runUnitTests()">ğŸ” Testes UnitÃ¡rios</button>
          <button type="button" class="btn-secondary" onclick="runIntegrationTests()">ğŸ”„ Testes de IntegraÃ§Ã£o</button>
          <button type="button" class="btn-secondary" onclick="runE2ETests()">ğŸŒ Testes E2E</button>
          <button type="button" class="btn-secondary" onclick="clearTestData()">ğŸ—‘ï¸ Limpar Dados de Teste</button>
          <button type="button" class="btn-secondary" onclick="clearLogs()">ğŸ—‘ï¸ Limpar Log</button>
        </div>
      </div>

    <!-- Log -->
    <div class="test-section">
      <h2>ğŸ“ Log de ExecuÃ§Ã£o</h2>
      <div class="log" id="test-log"></div>
    </div>

      <!-- Testes UnitÃ¡rios -->
      <div class="test-section">
        <h4>ğŸ§© Testes UnitÃ¡rios</h4>
        <div id="unit-tests"></div>
      </div>

      <!-- Testes de IntegraÃ§Ã£o -->
      <div class="test-section">
        <h4>ğŸ”— Testes de IntegraÃ§Ã£o</h4>
        <div id="integration-tests"></div>
      </div>

      <!-- Testes E2E -->
      <div class="test-section">
        <h4>ğŸ­ Testes End-to-End</h4>
        <div id="e2e-tests"></div>
      </div>
    </section>

    <a href="index.html" class="back-link">â† Voltar para o rastreador</a>
  </div>

  <script src="src/js/sync-manager.js"></script>
  <script src="src/js/test-sync.js"></script>
  <script src="src/js/sync-manager-aux.js"></script>
</body>
</html>